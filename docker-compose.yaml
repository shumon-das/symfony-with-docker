version: '3.7'
services:
#    database:
#        image: 'mysql:latest'
#        environment:
#            MYSQL_ROOT_PASSWORD: password
#            MYSQL_DATABASE: main
#        ports:
#            # To allow the host machine to access the ports below, modify the lines below.
#            # For example, to allow the host to connect to port 3306 on the container, you would change
#            # "3306" to "3306:3306". Where the first port is exposed to the host and the second is the container port.
#            # See https://docs.docker.com/compose/compose-file/#ports for more information.
#            - '3306'
    db:
      container_name: db
      image: mariadb:10.3
      restart: "no"
      environment:
          MYSQL_ROOT_PASSWORD: 123456
      ports:
          - 3306:3306

    phpmyadmin:
      container_name: phpmyadmin
      image: phpmyadmin
      restart: "no"
      ports:
          - 14000:80
      environment:
          - PMA_ARBITRARY=1

    nginx:
      container_name: nginx
      image: nginx:stable-alpine
      ports:
         - "8090:80"
      volumes:
         - ./:/var/www/symfony_wit_docker
         - ./docker/nginx/default.conf:/etc/nginx/conf.d/default.conf
      depends_on:
         - db
         - phpmyadmin

    php:
      container_name: php
      build:
        context: ./docker/php
      ports:
         - "9000:9000"
